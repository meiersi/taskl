================================================
 taskl - declarative, composable configurations
================================================

Synopsis
--------

.. code-block:: text

    taskl //<task> <arg>* < <taskl.yaml>
    taskl (-v | --version)
    taskl (-h | --help)

Description
-----------

Task/L compiles a system configuration, described in YAML, to a Bash script
which can be used to instantiate the configuartion.

The YAML files describes tasks which have a body and dependencies on other
tasks. Tasks can accept arguments, which are templated in to the commands that
make up the body and can be passed on to the dependencies.

The body of a Task/L task is a list commands, where each command is an array
of strings (without any of the usual shell escaping headaches). If the
headword of the command is an HTTP or HTTPS URL, then the target of the URL
will be downloaded, marked executable and run with the given arguments at run
time.

Dependencies
------------

Scripts generated by `taskl` rely on `bash` and `curl`.

Application
-----------

.. code-block:: bash

  taskl //nginx < example/servers.yaml | ssh user@host.com sudo bash

The generated scripts can be given arguments to run specific task bodies (for
debugging), to show the plan and to show the subtasks that were compiled in.  

.. code-block:: bash

  taskl //nginx < example/servers.yaml > nginx.bash

  chmod ug+x nginx.bash

  ./nginx.bash show
  * //nginx
  *  //apt -y install nginx-extras
  *   //apt.ppa nginx/stable
  *    //apt.ppa.setup
  *   //apt.up

  ./nginx.bash list
  //apt
  //apt.ppa
  //apt.ppa.setup
  //apt.up
  //nginx

