//db:
  .: - //pg.root
     - //pg.branch

//web:
  .: - //pg.branch
     - //node
     - //nginx

//node:
  .: - aptitude: [-y, install, nodejs, npm]
       .: //apt.ppa: [chris-lea/node.js]

//nginx:
  .: - aptitude: [-y, install, nginx-extras]
       .: //apt.ppa: [nginx/stable]

//pg.root:
  _: [{version: 9.2}]  # Variable with default.
  .: - aptitude: [ -y, install,
                       [postgresql-,{version}], [postgresql-,{version},-dbg],
                       [postgresql-contrib-,{version}],
                       [postgresql-client-,{version}],
                       [postgresql-doc-,{version}],
                       [postgresql-server-dev-,{version}] ]
       .: //apt.ppa: [ pitti/postgresql ]

//pg.branch:
  _: [{version: 9.2}]  # Variable with default.
  .: - aptitude: [ -y, install, [postgresql-client-,{version}] ]
       .: //apt.ppa: [ pitti/postgresql ]

//apt.ppa:
  _: [ppa]
  ;: - aptitude: [ -y, install, python-software-properties ]
     - add-apt-repository: [ ['ppa:',{ppa}] ]
     - aptitude: [ update ]

